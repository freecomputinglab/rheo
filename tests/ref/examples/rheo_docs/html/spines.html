<!DOCTYPE html><html><head><link rel="stylesheet" href="style.css">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <div class="topbar">
      <button class="sidebar-toggle" aria-label="Toggle sidebar"><span class="hamburger"></span></button>
      <div class="topbar-title"><img src="data:image/svg+xml;base64,PHN2ZwogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICB3aWR0aD0iMjYwIgogIGhlaWdodD0iMTIwIgogIHZpZXdCb3g9IjAgMCAyNjAgMTIwIgo+CiAgPCEtLSBDb2xvciBkZWZpbml0aW9uIC0tPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAudGV4dCB7CiAgICAgICAgZmlsbDogIzNkMjY0NTsKICAgICAgICBmb250LWZhbWlseTogIkJlcmtlbGV5IE1vbm8iLCAiSmV0QnJhaW5zIE1vbm8iLCAiSUJNIFBsZXggTW9ubyIsIG1vbm9zcGFjZTsKICAgICAgICBmb250LXNpemU6IDY0cHg7CiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgICBkb21pbmFudC1iYXNlbGluZTogbWlkZGxlOwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvZGVmcz4KCiAgPCEtLSBSIGNoYXJhY3RlciAoeW91ciBwcm92aWRlZCBnbHlwaCkgLS0+CiAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAsIDEwKSBzY2FsZSgxLjIpIj4KICAgIDwhLS0gdGF1IGJhc2UgLS0+CiAgICA8cGF0aAogICAgICBkPSJNMjAgMjAgSDYwIFYyNSBIMzAgVjgwIgogICAgICBzdHJva2U9IiMzZDI2NDUiCiAgICAgIHN0cm9rZS13aWR0aD0iNiIKICAgICAgZmlsbD0ibm9uZSIKICAgICAgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIKICAgIC8+CiAgICA8IS0tIHJobyBmbG93IC0tPgogICAgPHBhdGgKICAgICAgZD0iTTYwIDI1IEM3MCAzMCwgNzAgNjAsIDUwIDY1IEM0MCA2NywgNDUgNTAsIDU1IDUwIgogICAgICBzdHJva2U9IiMzZDI2NDUiCiAgICAgIHN0cm9rZS13aWR0aD0iNiIKICAgICAgZmlsbD0ibm9uZSIKICAgICAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogICAgLz4KICA8L2c+CgogIDwhLS0gImhlbyIgdGV4dCAtLT4KICA8dGV4dAogICAgeD0iMTEwIgogICAgeT0iNjAiCiAgICBjbGFzcz0idGV4dCIKICAgIGxldHRlci1zcGFjaW5nPSIwLjAyZW0iCiAgPgogICAgaGVvCiAgPC90ZXh0Pgo8L3N2Zz4K" style="height: 24pt"></div>
    </div>
    <nav class="sidebar">
      <div class="banner"><a href="./"></a></div>
      <ul class="sidebar-nav">
        <li class=""><a href="./">Home</a></li>
        <li class=""><a href="./what-and-why-is-rheo.html">What and why is rheo?</a></li>
        <li class=""><a href="./getting-started.html">Getting started</a></li>
        <li class=""><a href="./relative-linking.html">Relative linking</a></li>
        <li class=""><a href="./rheotoml.html">Rheo.toml</a></li>
        <li class=""><a href="./build-dir.html">Build directory</a></li>
        <li class=""><a href="./content-dir.html">Content directory</a></li>
        <li class=""><a href="./formats.html">Formats</a></li>
        <li class="active"><a href="./spines.html">Spines</a></li>
        <li class=""><a href="./custom-css.html">Custom CSS</a></li>
      </ul>
    </nav>
    <div class="content">
      <h2>Spines</h2>
      <p>A spine in rheo is the backbone or ‘table of contents’ of Typst source files that should be compiled to an output format. It takes its name from the <a href="https://www.edrlab.org/open-standards/anatomy-of-an-epub-3-file/">epub specification</a>, in which the spine articulates—or <em>reticulates</em>— the set and order of chapters included.</p>
      <p>You can specify a spine’s vertebrae for any output format using an array of <a href="https://www.man7.org/linux/man-pages/man7/glob.7.html">glob</a> strings in <code>rheo.toml</code>:</p>
      <pre><code data-lang="toml">[<span style="color: #4b69c6">epub</span>.<span style="color: #4b69c6">spine</span>]<br><span style="color: #4b69c6">title</span> = <span style="color: #198810">"</span><span style="color: #198810">My epub</span><span style="color: #198810">"</span><br><span style="color: #4b69c6">vertebrae</span> = [<span style="color: #198810">"</span><span style="color: #198810">intro.typ</span><span style="color: #198810">"</span>, <span style="color: #198810">"</span><span style="color: #198810">*.typ</span><span style="color: #198810">"</span>]</code></pre>
      <p>Notice how the first entry <code>intro.typ</code> is a specific file, whereas the second <code>*.typ</code> captures a range of files. When a glob string captures a range of source files, they will be ordered lexicographically in the spine.</p>
      <h3>EPUB</h3>
      <p>An EPUB must have a spine in order to be valid. By default, rheo will infer the following spine if not specified:</p>
      <pre><code data-lang="toml">[<span style="color: #4b69c6">epub</span>.<span style="color: #4b69c6">spine</span>]<br><span style="color: #4b69c6">title</span> = <span style="color: #198810">"</span><span style="color: #198810">[project folder name]</span><span style="color: #198810">"</span><br><span style="color: #4b69c6">vertebrae</span> = [<span style="color: #198810">"</span><span style="color: #198810">**/*.typ</span><span style="color: #198810">"</span>]</code></pre>
      <h3>PDF</h3>
      <p>By default, rheo generates one PDF per Typst source file. You can specify a spine for the PDF format in order to reticulate multiple source documents into a single output PDF by indicating the vertebrae and setting <code>merge</code> to <code>true</code>:</p>
      <pre><code data-lang="toml">[<span style="color: #4b69c6">pdf</span>.<span style="color: #4b69c6">spine</span>]<br><span style="color: #4b69c6">title</span> = <span style="color: #198810">"</span><span style="color: #198810">My reticulated pdf</span><span style="color: #198810">"</span><br><span style="color: #4b69c6">vertebrae</span> = [<span style="color: #198810">"</span><span style="color: #198810">intro.typ</span><span style="color: #198810">"</span>, <span style="color: #198810">"</span><span style="color: #198810">*.typ</span><span style="color: #198810">"</span>]<br><span style="color: #4b69c6">merge</span> = <span style="color: #d73948">true</span></code></pre>
      <p>In a PDF generated in this way, <a href="./relative-linking.html">relative links</a> will resolve to internal document links that point to the relevant section.</p>
      <h3>HTML</h3>
      <p>Rheo does not currently support customizing HTML spines. The default spine uses all Typst files:</p>
      <pre><code data-lang="toml">[<span style="color: #4b69c6">html</span>.<span style="color: #4b69c6">spine</span>]<br><span style="color: #4b69c6">title</span> = <span style="color: #198810">"</span><span style="color: #198810">[project folder name]</span><span style="color: #198810">"</span><br><span style="color: #4b69c6">vertebrae</span> = [<span style="color: #198810">"</span><span style="color: #198810">**/*.typ</span><span style="color: #198810">"</span>]</code></pre>
    </div>
    <div class="nav-arrows desktop-nav"><a href="./formats.html" class="nav-arrow prev-arrow"><span class="arrow-icon">←</span> <span class="arrow-text">Formats</span></a> <a href="./custom-css.html" class="nav-arrow next-arrow"><span class="arrow-text">Custom CSS</span> <span class="arrow-icon">→</span></a></div>
    <div class="nav-arrows mobile-nav"><a href="./formats.html" class="nav-arrow prev-arrow"><span class="arrow-icon">←</span> <span class="arrow-text">Previous</span></a> <a href="./custom-css.html" class="nav-arrow next-arrow"><span class="arrow-text">Next</span> <span class="arrow-icon">→</span></a></div>
    <script>
      eval(atob('Y29uc3QgdG9nZ2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXItdG9nZ2xlJyk7CmNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhcicpOwpjb25zdCB0b3BiYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9wYmFyJyk7CgovLyBDcmVhdGUgYmFja2Ryb3AgZWxlbWVudApjb25zdCBiYWNrZHJvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwpiYWNrZHJvcC5jbGFzc05hbWUgPSAnc2lkZWJhci1iYWNrZHJvcCc7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYmFja2Ryb3ApOwoKZnVuY3Rpb24gaXNNb2JpbGUoKSB7CiAgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2ODsKfQoKZnVuY3Rpb24gY2xvc2VTaWRlYmFyKCkgewogIHNpZGViYXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgdG9wYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ3NpZGViYXItb3BlbicpOwogIGJhY2tkcm9wLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTsKfQoKZnVuY3Rpb24gb3BlblNpZGViYXIoKSB7CiAgc2lkZWJhci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICB0b3BiYXIuY2xhc3NMaXN0LmFkZCgnc2lkZWJhci1vcGVuJyk7CiAgaWYgKGlzTW9iaWxlKCkpIHsKICAgIGJhY2tkcm9wLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTsKICB9Cn0KCmZ1bmN0aW9uIGluaXRTaWRlYmFyKCkgewogIGlmIChpc01vYmlsZSgpKSB7CiAgICBzaWRlYmFyLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgdG9wYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ3NpZGViYXItb3BlbicpOwogICAgdG9wYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ3NpZGViYXItY2xvc2VkJyk7CiAgICBiYWNrZHJvcC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7CiAgfSBlbHNlIHsKICAgIHNpZGViYXIuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICB0b3BiYXIuY2xhc3NMaXN0LnJlbW92ZSgnc2lkZWJhci1vcGVuJyk7CiAgICB0b3BiYXIuY2xhc3NMaXN0LnJlbW92ZSgnc2lkZWJhci1jbG9zZWQnKTsKICAgIGJhY2tkcm9wLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTsKICB9Cn0KCnRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICBjb25zdCBpc0hpZGRlbiA9IHNpZGViYXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKTsKCiAgaWYgKGlzTW9iaWxlKCkpIHsKICAgIGlmIChpc0hpZGRlbikgewogICAgICBvcGVuU2lkZWJhcigpOwogICAgfSBlbHNlIHsKICAgICAgY2xvc2VTaWRlYmFyKCk7CiAgICB9CiAgfSBlbHNlIHsKICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7CiAgICBpZiAoaXNIaWRkZW4pIHsKICAgICAgdG9wYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ3NpZGViYXItY2xvc2VkJyk7CiAgICB9IGVsc2UgewogICAgICB0b3BiYXIuY2xhc3NMaXN0LmFkZCgnc2lkZWJhci1jbG9zZWQnKTsKICAgIH0KICB9Cn0pOwoKLy8gQ2xvc2Ugc2lkZWJhciB3aGVuIGNsaWNraW5nIGJhY2tkcm9wIChtb2JpbGUgb25seSkKYmFja2Ryb3AuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgaWYgKGlzTW9iaWxlKCkpIHsKICAgIGNsb3NlU2lkZWJhcigpOwogIH0KfSk7Cgppbml0U2lkZWJhcigpOwoKbGV0IHJlc2l6ZVRpbWVvdXQ7CndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7CiAgY2xlYXJUaW1lb3V0KHJlc2l6ZVRpbWVvdXQpOwogIHJlc2l6ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGluaXRTaWRlYmFyLCAxNTApOwp9KTsKCi8vIFdhaXQgZm9yIERPTSB0byBiZSBmdWxseSBsb2FkZWQgYmVmb3JlIG1vdmluZyBhcnJvd3MKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHsKICAvLyBNb3ZlIG5hdmlnYXRpb24gYXJyb3dzIGFmdGVyIGVuZG5vdGVzIGlmIHRoZXkgZXhpc3QKICBjb25zdCBlbmRub3RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPSJkb2MtZW5kbm90ZXMiXScpOwogIGlmIChlbmRub3RlcykgewogICAgY29uc3QgZGVza3RvcE5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtYXJyb3dzLmRlc2t0b3AtbmF2Jyk7CiAgICBjb25zdCBtb2JpbGVOYXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2LWFycm93cy5tb2JpbGUtbmF2Jyk7CiAgICAvLyBJbnNlcnQgaW4gcmV2ZXJzZSBvcmRlciBzbyB0aGV5IGVuZCB1cCBpbiB0aGUgcmlnaHQgb3JkZXIKICAgIGlmIChtb2JpbGVOYXYpIGVuZG5vdGVzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG1vYmlsZU5hdiwgZW5kbm90ZXMubmV4dFNpYmxpbmcpOwogICAgaWYgKGRlc2t0b3BOYXYpIGVuZG5vdGVzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRlc2t0b3BOYXYsIGVuZG5vdGVzLm5leHRTaWJsaW5nKTsKICB9Cn0pOwoKLy8gS2V5Ym9hcmQgbmF2aWdhdGlvbgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHsKICAvLyBMZWZ0IGFycm93IGtleSAtIHByZXZpb3VzIHBhZ2UKICBpZiAoZS5rZXkgPT09ICdBcnJvd0xlZnQnKSB7CiAgICBjb25zdCBwcmV2TGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmV2LWFycm93Jyk7CiAgICBpZiAocHJldkxpbmspIHByZXZMaW5rLmNsaWNrKCk7CiAgfQogIC8vIFJpZ2h0IGFycm93IGtleSAtIG5leHQgcGFnZQogIGlmIChlLmtleSA9PT0gJ0Fycm93UmlnaHQnKSB7CiAgICBjb25zdCBuZXh0TGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZXh0LWFycm93Jyk7CiAgICBpZiAobmV4dExpbmspIG5leHRMaW5rLmNsaWNrKCk7CiAgfQp9KTsK'));
    </script>
  

</body></html>